"use strict";define(["Zepto","service","utils"],function(a,b,c){var d,e=a("#input-name"),f=a("#input-phone"),g=a("#input-code"),h=a("#input-pwd"),i=a("#input-conf-pwd"),j=a("#input-invPhone"),k=a("#page-token"),l=!1,m=60;a("#get-vcode").tap(function(){if(!l){if(!c.checkPhone(f.val()))return void c.showToastMsg("请输入正确的手机号","warn");l=!0,m=60,a(this).css("background-color","#cecece"),d=setInterval(n,1e3);var e={phone:f.val(),token:k.val()};b.sendVcode(e,function(){})}});var n=function(){--m<=0?(l=!1,a("#get-vcode").css("background-color","#ff6c00"),a("#get-vcode").text("获取验证码"),clearInterval(d)):a("#get-vcode").text("重发剩余"+m+"秒")};a("#reg-link").tap(function(){if(""==e.val().trim())return void c.showToastMsg("请输入名称","warn");if(!c.checkPhone(f.val()))return void c.showToastMsg("请输入正确的手机号","warn");if(""==g.val().trim())return void c.showToastMsg("请输入手机验证码","warn");if(h.val().length<6)return void c.showToastMsg("密码不能小于6位","warn");if(h.val()!=i.val())return void c.showToastMsg("两次输入的密码不一致","warn");if(!c.checkPhone(j.val()))return void c.showToastMsg("请输入正确的手机号","warn");var d={regName:e.val(),regPhone:f.val(),vcode:g.val(),regPasswd:h.val(),regType:a("select[name=reg-name] option:selected").val(),invPhone:j.val(),token:k.val()};c.showLoadingToast("注册中..."),b.register(d,function(){c.hideLoadingToast(),c.showToastMsg("注册成功",null,null,function(){window.location.href="/me"})},function(a,b){c.hideLoadingToast(),c.showToastMsg(a,"warn")})})});