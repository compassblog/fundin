"use strict";define(["Zepto","service","utils","wxClient"],function(a,b,c,d){var e={title:projTitle,link:location.href,imgUrl:projImgUrl},f={title:projTitle,desc:a("#projDesc").text(),link:location.href,imgUrl:projImgUrl};d.isInWeixin?(b.getJsApiConfig({url:window.location.href},function(a){d.wxConfig(a)}),d.wxConfigReady(function(){d.shareTimeline(e),d.shareAppMessage(f)}),a("#share-wechat").tap(function(){a("#share-tip").css("display","block")})):(a("#share-wechat").remove(),a("#share-tip").remove()),a("#share-btn").tap(function(){function b(b,c){a("#share-tip").css("display","none"),b.removeClass("weui_actionsheet_toggle"),c.removeClass("weui_fade_toggle"),c.on("transitionend",function(){c.css("display","none")}).on("webkitTransitionEnd",function(){c.css("display","none")})}var c=a("#share-mask"),d=a("#share-action");d.addClass("weui_actionsheet_toggle"),c.css("display","block").focus().addClass("weui_fade_toggle").one("tap",function(){b(d,c)}),a("#share-cancle").one("tap",function(){b(d,c)}),c.unbind("transitionend").unbind("webkitTransitionEnd")}),d.isInWeixin?a("#support-btn").tap(function(){return loginStatus?void(location.href=d.getOauthUrl("http://m.fundin.cn/pay/"+projId)):void(location.href="/m/login?returnUrl="+location.href)}):a("#support-btn").tap(function(){c.showToastMsg("请在微信中打开此网页进行支付操作","warn")});var g={projId:projId,type:1};a("#follow-btn").tap(function(){return loginStatus?void b.saveUserAction(g,function(){c.showToastMsg("关注成功",null,null,function(){location.reload()})}):void(location.href="/m/login?returnUrl="+location.href)})});